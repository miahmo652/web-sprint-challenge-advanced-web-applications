{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Miahm\\\\Lambdaprojects\\\\web-sprint-challenge-advanced-web-applications\\\\client\\\\src\\\\components\\\\Login.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\n\nclass Login extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      credentials: {\n        username: \"\",\n        password: \"\"\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        credentials: { ...this.state.credentials,\n          [e.target.name]: e.target.value\n        }\n      });\n    };\n\n    this.login = e => {\n      e.preventDefault(); // make a post request to the login endpoint on the server\n\n      axios;\n      axiosWithAuth().post(\"/login\", this.state.credentials).then(res => {\n        console.log(res);\n        localStorage.setItem(\"token\", res.data.payload); // redirect the user to the app's main logged in page\n\n        this.props.history.push(\"/protected\");\n      }).catch(err => console.log({\n        err\n      }));\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Welcome to the Bubble App!\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Build a login page here\"), React.createElement(\"form\", {\n      onSubmit: this.login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Username:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      value: this.state.credentials.username,\n      onchange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Password:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"password\",\n      value: this.state.credentials.password,\n      onchange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Log in\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Miahm/Lambdaprojects/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js"],"names":["React","axios","axiosWithAuth","Login","Component","state","credentials","username","password","handleChange","e","setState","target","name","value","login","preventDefault","post","then","res","console","log","localStorage","setItem","data","payload","props","history","push","catch","err","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,aAAR,QAA4B,wBAA5B;;AAIA,MAAMC,KAAN,SAAoBH,KAAK,CAACI,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAClCC,KADkC,GAC1B;AACNC,MAAAA,WAAW,EAAE;AACXC,QAAAA,QAAQ,EAAE,EADC;AAEXC,QAAAA,QAAQ,EAAE;AAFC;AADP,KAD0B;;AAAA,SAQlCC,YARkC,GAQnBC,CAAC,IAAI;AAClB,WAAKC,QAAL,CAAc;AACZL,QAAAA,WAAW,EAAE,EACX,GAAG,KAAKD,KAAL,CAAWC,WADH;AAEX,WAACI,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AAFf;AADD,OAAd;AAMD,KAfiC;;AAAA,SAoBlCC,KApBkC,GAoB1BL,CAAC,IAAI;AACXA,MAAAA,CAAC,CAACM,cAAF,GADW,CAEX;;AACAf,MAAAA,KAAK;AACLC,MAAAA,aAAa,GACVe,IADH,CACQ,QADR,EACkB,KAAKZ,KAAL,CAAWC,WAD7B,EAEGY,IAFH,CAEQC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAG,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,GAAG,CAACK,IAAJ,CAASC,OAAvC,EAFW,CAGX;;AACA,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACD,OAPH,EAQGC,KARH,CAQSC,GAAG,IAAIV,OAAO,CAACC,GAAR,CAAY;AAAES,QAAAA;AAAF,OAAZ,CARhB;AASD,KAjCiC;AAAA;;AAoClCC,EAAAA,MAAM,GAAE;AACN,WACE,0CACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFA,EAGA;AAAM,MAAA,QAAQ,EAAE,KAAKhB,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEG;AACC,MAAA,IAAI,EAAC,MADN;AAEC,MAAA,IAAI,EAAC,UAFN;AAGC,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAWC,WAAX,CAAuBC,QAH/B;AAIC,MAAA,QAAQ,EAAE,KAAKE,YAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CADE,EAWF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWC,WAAX,CAAuBE,QAHhC;AAIE,MAAA,QAAQ,EAAE,KAAKC,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAXE,EAoBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApBE,CAHA,CADF;AA6BD;;AAlEiC;;AAoEpC,eAAeN,KAAf","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport {axiosWithAuth} from '../utils/axiosWithAuth';\r\n\r\n\r\n\r\nclass Login extends React.Component {\r\n  state = {\r\n    credentials: {\r\n      username: \"\",\r\n      password: \"\"\r\n    }\r\n\r\n  };\r\n  handleChange = e => {\r\n    this.setState({\r\n      credentials: {\r\n        ...this.state.credentials,\r\n        [e.target.name]: e.target.value\r\n      }\r\n    });\r\n  };\r\n\r\n  // make a post request to retrieve a token from the api\r\n  // when you have handled the token, navigate to the BubblePage route\r\n\r\n  login = e => {\r\n    e.preventDefault();\r\n    // make a post request to the login endpoint on the server\r\n    axios\r\n    axiosWithAuth()\r\n      .post(\"/login\", this.state.credentials)\r\n      .then(res => {\r\n        console.log(res);\r\n        localStorage.setItem(\"token\", res.data.payload);\r\n        // redirect the user to the app's main logged in page\r\n        this.props.history.push(\"/protected\");\r\n      })\r\n      .catch(err => console.log({ err }));\r\n  };\r\n\r\n\r\n  render(){\r\n    return(\r\n      <> \r\n      <h1>Welcome to the Bubble App!</h1>\r\n      <p>Build a login page here</p>\r\n      <form onSubmit={this.login}>\r\n    <label> \r\n      Username:\r\n       <input \r\n        type=\"text\"\r\n        name=\"username\"\r\n        value={this.state.credentials.username}\r\n        onchange={this.handleChange}\r\n        />\r\n\r\n    </label>\r\n    <label>\r\n      Password:\r\n      <input \r\n        type=\"text\"\r\n        name=\"password\"\r\n        value={this.state.credentials.password}\r\n        onchange={this.handleChange}\r\n        />\r\n    </label>\r\n    <button>Log in</button>\r\n      </form>\r\n      \r\n      </>\r\n    )\r\n  }\r\n}\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}